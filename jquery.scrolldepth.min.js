/*!
 * @preserve
 * jquery.scrolldepth.js | v1.0
 * Copyright (c) 2016 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){"use strict";var g,h,i,j,b={minHeight:0,elements:[],percentage:!0,userTiming:!0,pixelDepth:!0,nonInteraction:!0,gaGlobal:!1,gtmOverride:!1,trackerName:!1,dataLayer:"dataLayer",midPage:!1},c=a(window),d=[],e=!1,f=0;return a.scrollDepth=function(k){function m(a,b,c,d){var e=k.trackerName?k.trackerName+".send":"send";j?(j({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:a,eventLabel:b,eventValue:1,eventNonInteraction:k.nonInteraction}),k.pixelDepth&&arguments.length>2&&c>f&&(f=c,j({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:q(c),eventValue:1,eventNonInteraction:k.nonInteraction})),k.userTiming&&arguments.length>3&&j({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:a,eventLabel:b,eventTiming:d})):(g&&(window[i](e,"event","Scroll Depth",a,b,1,{nonInteraction:k.nonInteraction}),k.pixelDepth&&arguments.length>2&&c>f&&(f=c,window[i](e,"event","Scroll Depth","Pixel Depth",q(c),1,{nonInteraction:k.nonInteraction})),k.userTiming&&arguments.length>3&&window[i](e,"timing","Scroll Depth",a,d,b)),h&&(_gaq.push(["_trackEvent","Scroll Depth",a,b,1,k.nonInteraction]),k.pixelDepth&&arguments.length>2&&c>f&&(f=c,_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",q(c),1,k.nonInteraction])),k.userTiming&&arguments.length>3&&_gaq.push(["_trackTiming","Scroll Depth",a,d,b,100])))}function n(a){return{"25%":parseInt(.25*a,10),"50%":parseInt(.5*a,10),"75%":parseInt(.75*a,10),"100%":a-5}}function o(b,c,e){a.each(b,function(b,f){a.inArray(b,d)===-1&&c>=f&&(m("Percentage",b,c,e),d.push(b))})}function p(b,c,e){a.each(b,function(b,f){a.inArray(f,d)===-1&&a(f).length&&c>=a(f).offset().top&&(m("Elements",f,c,e),d.push(f))})}function q(a){return(250*Math.floor(a/250)).toString()}function r(){t()}function s(a,b){var c,d,e,f=null,g=0,h=function(){g=new Date,f=null,e=a.apply(c,d)};return function(){var i=new Date;g||(g=i);var j=b-(i-g);return c=this,d=arguments,j<=0?(clearTimeout(f),f=null,g=i,e=a.apply(c,d)):f||(f=setTimeout(h,j)),e}}function t(){e=!0,c.on("scroll.scrollDepth",s(function(){var b=a(document).height(),f=window.innerHeight?window.innerHeight:c.height(),g=c.scrollTop()+f,h=n(b),i=+new Date-l;return k.midPage&&g<b&&g>f&&(g-=Math.round(f/2)),d.length>=k.elements.length+(k.percentage?4:0)?(c.off("scroll.scrollDepth"),void(e=!1)):(k.elements&&p(k.elements,g,i),void(k.percentage&&o(h,g,i)))},500))}var l=+new Date;k=a.extend({},b,k),a(document).height()<k.minHeight||(k.gaGlobal?(g=!0,i=k.gaGlobal):"function"==typeof ga?(g=!0,i="ga"):"function"==typeof __gaTracker&&(g=!0,i="__gaTracker"),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(h=!0),"function"==typeof k.eventHandler?j=k.eventHandler:"undefined"==typeof window[k.dataLayer]||"function"!=typeof window[k.dataLayer].push||k.gtmOverride||(j=function(a){window[k.dataLayer].push(a)}),a.scrollDepth.reset=function(){d=[],f=0,c.off("scroll.scrollDepth"),t()},a.scrollDepth.addElements=function(b){"undefined"!=typeof b&&a.isArray(b)&&(a.merge(k.elements,b),e||t())},a.scrollDepth.removeElements=function(b){"undefined"!=typeof b&&a.isArray(b)&&a.each(b,function(b,c){var e=a.inArray(c,k.elements),f=a.inArray(c,d);e!=-1&&k.elements.splice(e,1),f!=-1&&d.splice(f,1)})},r())},a.scrollDepth});